language: cpp

compiler:
- gcc

env:
- GCC_BASE=520
- GCC_BASE=530

before_install:
- export SILENCE="defined"
- if [ "$GCC_BASE" = "520" ]; then export GCC_URL="https://ftp.gnu.org/gnu/gcc/gcc-5.2.0/gcc-5.2.0.tar.bz2";  fi
- if [ "$GCC_BASE" = "530" ]; then export GCC_URL="https://ftp.gnu.org/gnu/gcc/gcc-5.3.0/gcc-5.3.0.tar.bz2";  fi

install:
- sudo apt-get update
- if ! travis_wait 40 ./tools/scripts/setup-ubuntu.sh; then cat ~/setup-ubuntu_stderr.log; cat ~/create-cross-compiler_stderr.log; fi

script:
- make
- make unittest
- if [[ -n $(./tools/astyle/linux/run.sh | grep Formatted) ]]; then echo "You must run astyle before submitting a pull request"; exit -1; fi
